#答辩演讲稿

## 开场
尊敬的评委老师以及在座的各位同学，大家上午好，我是1403级计算机科学与技术专业的彭广杰，很高兴在这里论文答辩，希望这次答辩能为我在北航的学习生涯画上一个完美的句号。我的研究内容是：基于android的天气预报软件开发，先解释两个问题：
## 绪论

**1 为什么选择现在？**


### 背景  

4G移动互联网在中国的普及，以及android市场占有率的突飞猛进，得益于android开源，据第三方数据调研机构gartner数据显示：2015 q3 android 80%占有率,

**2 为什么选择天气预报？**
### 意义 
#### 1 更方便的信息获取渠道；
#### 2 方便人们生活出行；
#### 3 减灾防灾；
#### 4 科技服务生活。
接下来从整体上对软件的可行性，需求，用例方面进行系统的分析。

## 系统分析
### 1 可行性
####(1)Android智能手机普及（软件运行的载体）
需要获取实时天气，很显然是一个cs应用；

**客户端方面**
####(2)熟悉java编程语言（客户端支持）

**后台方面**
####(3)和风网提供天气数据api（后台接口支持），不需要后台开发，节省开发时间。

### 2 需求
4 个功能点
#### 实时天气
#### 未来天气
#### 切换城市
#### 设置默认
### 3 用例
从功能点可看出用例图如下：
4个点+用户

## 环境搭建
java7+android studio

## 程序设计
从整体设计图可以看出： 3模块+3界面，两个维度
界面设计 sketch
1 欢迎页

2 左边主界面，右边切换城市界面

3 数据库设计 sqlite
  3个字段： id code city

**接下来开始编码实现：**
## 编码实现
什么是MVC？
一种软件设计典范，是一种将业务逻辑，数据，界面设计分离的方法组织代码，实现了模块解耦，增加扩展性和灵活性。
缺点（如果老师问）：视图对逻辑的依赖（只适合当前业务）；视图对模型的低效率访问
由于采用了mvc设计模式，编码实现安装mvc的顺序讲解讲解
###M：网络操作  
**M层接口：WeatherModel，4个方法：**

#### 前两个：获取城市列表与指定城市天气；      
 

看封装的两个实体类：
**City**  ：City id
**Weather**  basic(城市名，经纬度), now, daily_foreast,hour_foreast(可不说)

看WeatherModel的实现类：WeatherModelImpl.java 

先看前城市列表和天气：Volley访问网络接口，获得数据；
       解析：采用gson的fromJson方法，构造Gsonparser,定义目标类的泛型，返回解析结果，通过WeatherListener回调返回结果；上半部分解析城市天气预报，下半部分解析全国城市列表。
       
  对于获取城市列表接口：获取到城市列表后存储到sqlite数据库，看CustomDbHelper:
   
   建表sql语句，批量插入 模糊查询  

#### 后两个：默认城市的存储和获取

  默认城市采用由于只有一条数据，采用preference存储，未设置默认取北京

###V：xml layout  三个界面   

 
#### 欢迎页：
由于android的单线程模型，耗时操作放在非UI线程，采用BackGroundService extend intentservice，handleintent方法处理请求城市列表逻辑，用前边提到的网络接口请求数据，存储到sqlite数据库
 
 天气预报页面：上下两部分，看截图讲解
 
#### 切换城市页面：
 
 搜索框由Android的AutoCompleteTextView实现，需要绑定adapter数据源，可实现补全提示，此处需要为AutoCompleteTextView提供一个CursorAdapter，根据输入的关键字利用CustomDbHelper模糊查询数据库中匹配的城市名称,并返回更新后的cursor。关键代码为CursorAdapter的runQueryOnBackgroundThread函数，
 

 代码编写在activity，没有解耦，顺便提下mvp，因项目较小，未采用
 
### C：Activity通信桥梁：根据业务接受用户输入，以及更新ui

## 功能测试
为了方便看到效果，采用genymotion模拟器，在Android Studio中单击菜单栏的run app按钮 

说下运行流程：

1 启动后，后台从网络获取并存储全国城市列表，大概2567个县级以上城市；

2 读取本地存储的默认城市，默认为北京，不会等到城市列表返回。

3 获取默认城市的实时天气预报和未来天气预报；

4 切换城市界面可以自动补全提示。

主界面分两部分讲解：实时天气+未来天气
切换城市：自动提示，以及设置默认城市
## 结语

基本功能实现，达到研究目的；

通过论文写作，锻炼了逻辑思维和组织、驾驭语言的能力；

通过本次研究，培养了分析问题、解决问题的能力。

缺点：程序健壮性，后续改进


再次感谢我的指导老师张正娟，以及现场的各位老师同学，谢谢！
